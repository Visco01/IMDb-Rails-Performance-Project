<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Project Report</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
    margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-uiBlue { background-color: rgba(35, 131, 226, .07); }
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-transparentGray { background-color: rgba(227, 226, 224, 0); }
.select-value-color-translucentGray { background-color: rgba(0, 0, 0, 0.06); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }
.select-value-color-pageGlass { background-color: undefined; }
.select-value-color-washGlass { background-color: undefined; }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="415b562b-628e-4740-b772-70a2c70d3fb9" class="page sans"><header><img class="page-cover-image" src="https://th.bing.com/th/id/R.94ada1841ee93c08e043ad08e26463de?rik=CDqJr3fCtGGFjw&amp;pid=ImgRaw&amp;r=0" style="object-position:center 63.96999999999999%"/><h1 class="page-title">Project Report</h1><p class="page-description"></p></header><div class="page-body"><blockquote id="620a579c-7218-4be7-a95b-960e5066038b" class=""><strong>Ca’ Foscari University of Venice</strong><br/><br/><strong>CM90</strong> - Computer Science and Information Technology<br/><br/><strong>CM0481</strong> - Software Performance and Scalability - A.Y. 2023-24<br/><br/><strong>Authors</strong>: Francesco Forcellato, Gabriele Pilotto, Nicole Marini, Pietro Visconti</blockquote><hr id="513a7f7a-5eab-4710-ba40-6a23cb492305"/><h2 id="c0638133-995b-4503-8c98-71196f0e4731" class="">Table of content:</h2><nav id="d80c976c-39c7-49c8-a408-a0c1a7942f62" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#c0638133-995b-4503-8c98-71196f0e4731">Table of content:</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#ebc6623d-cde3-4189-af0f-692fb3ed5b21">0. Introduction</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#64ff2d14-8392-45d3-b6f8-a4d0e1b1bf4c">1. Under the hood - Software</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#30ab5b1e-076f-424f-a2e6-438a47a0888b">1.1. Docker</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#4ffab186-aa0b-40a0-921d-aca339a4a0d8">1.2. Ruby (on Rails)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#a025974c-8160-4006-9eb2-6ea7bd604a23">1.2.1. Rails workflow</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#ab3e1e1a-a9d6-4863-917d-3a80ec6392f4">1.3. Database</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#f552b11f-9ae6-40db-a2e3-14f9ad81c9e0">1.3.1. PostgreSQL</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#aa99f34d-762d-4626-927a-e34a244126d8">1.3.2. IMDB Dataset</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#4d5a38cb-8ad9-41ee-90db-9037e18df9c2">1.3.3.  Initial database structure </a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#3368b080-a069-448d-8a68-308637646942">2. Under the hood - Hardware</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#9e002750-5738-42e1-82ef-53cf004fd83d">2.1. Devices</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#0b36a115-0b9c-48a5-af14-88675d6b551c">2.1.1. Server</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#9a51162f-38da-4bf6-bbeb-f3d1389a70b4">2.1.2. Testing machine </a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#4ca8d33a-ac44-41a4-be6d-d8d32bc60b7c">2.2. Connection</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#5d0f923b-91ae-4fb7-bbf1-06c195ddae2f">2.2.1. ZeroTier</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#13b6f3fc-6060-4708-8245-f98272ef006b">2.2.2. Bandwidth</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#db1c7f10-e42e-4730-827d-eb1170df92ec">3. System model and components</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#247aa73b-4634-413e-9f17-342335b8d709">4. First unoptimized version</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#a3eb262e-4bd3-49d0-ba88-1228972f6b15">4.1. Query-set generation</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#d80194ec-9f6a-436c-a446-32846c01680f">4.2. Resources allocation</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#0b8aad8f-bfd1-479a-9ab5-ab735d60d87f">4.3. Finding the optimal number of users</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#6f947fa0-ca8d-4754-9e9b-30a161a2b082">4.3.1. Classes of jobs for testing </a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#7a3d041d-bc1a-4679-968d-009989299c3a">4.3.2. Finding optimal number of users for Directors by name</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#6decf56f-3f73-4942-a8fe-0af377de6d0d">4.4. Testing all classes</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#97ae5a4c-b139-4318-bea3-4475bc052c4b">4.4.1. JMeter configuration </a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#fb4b17af-17b6-46e1-835c-01839ee9138b">4.4.2. Standalone tests results</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#b73dabb5-f3b0-43ad-a62c-fe7e4a7b694b">4.4.3. Mixed test results</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#2cbc9996-8c76-44e7-aed3-1bf798e848ae">4.4.4. Identify the bottleneck</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#46d369b1-cf85-4676-83ed-d297e1480bd7">5. Tuning</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#af08404c-d654-4b38-9ba0-77de2164d073">5.1. Cores assignment</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#5512e23f-1463-4707-ac7f-64e96cd5df9e">5.2. Rails cache</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#a7159ef6-1572-413d-a7ca-92378a0ee216">5.3. PostgreSQL indexes</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#42c005e4-7af2-470a-9e38-3315d4ffef02">5.4. Queries tuning</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#d3894cd5-5d06-47be-9fe6-31bc1e067aff">5.5. Cores assignment (again)</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#5dd43c97-4c71-4214-8042-b7f189185a2c">6. Final tests</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#ffadff78-71fd-4d98-a9d6-fb024be51d2e">6.1. Finding the optimal number of users</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#92408d07-2e39-4689-a302-ce8328f498b3">6.1.1. Replicate the previous test</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#94665b61-6cab-41c3-8db3-a056b677f1b9">6.1.2. A more realistic test </a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#983977fa-ff43-4c78-aad0-f20b61cfb6e8">6.2. Testing all the classes</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#f518fc6a-19b4-410e-81c1-3861d39392fa">6.2.1. JMeter configuration</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#7fc8aefe-a456-4e14-b8a2-4773725086a8">6.2.2. Mixed test results</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#d2b8aac2-7099-4035-b604-a871acc8258a">6.3. Moving to local network</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#bfd57bb6-b872-4821-9129-0567ee41d1d6">6.3.1. Finding the optimal number of users</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#41432bef-2494-4d69-9014-c31e4941e366">6.3.2. Downgrade to single core</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#b6c892c2-4897-4f87-ad84-b1153082c732">6.3.3. Finding the optimal number of users (for 1 core) </a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#74fdbf6f-a17f-4d98-9851-82b46d7879c8">6.3.4. Testing all classes (with 1 core)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#f3e8921e-86e4-4db4-afc2-7bd3c5f1402b">6.4 Restoring ZeroTier</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#9cef06d6-7985-4c9f-9e95-065142b5c25f">6.4.1. Standalone tests</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#bff1f926-1b64-4004-b419-903c55f3ba8a">6.4.2. Mixed test</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#61b3bebb-40d3-49be-8826-855951ed5d03">6.4.3. Results analysis </a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#70ba13a0-9380-46b0-8708-c28d8098c288">6.5. JMT analysis</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#6a927a5a-6a99-41eb-b08a-c1f0fe7defa5">7. Considerations</a></div></nav><h1 id="ebc6623d-cde3-4189-af0f-692fb3ed5b21" class="">0. Introduction</h1><p id="078696ea-e448-4267-a853-baa77e47302f" class="">This project aims to deploy a web application where users can interrogate a local copy of the IMDb dataset, define its model, test its performance in order to find the bottleneck and then propose a solution to it. All the software and datasets used are updated to 24/04/2024. </p><p id="731d17e2-76af-4224-861f-4bc11cd68f12" class="">To run by yourself the webapp, it’s sufficient to build the Docker containers and import the dataset (dedicated tasks are provided) and generate the query-sets.</p><h1 id="64ff2d14-8392-45d3-b6f8-a4d0e1b1bf4c" class="">1. Under the hood - Software</h1><p id="7af3bcbc-2fe6-4265-9fb8-a7ba51db346b" class="">This section will explain our software choice, the motivations, and briefly how we implemented them. </p><h2 id="30ab5b1e-076f-424f-a2e6-438a47a0888b" class="">1.1. Docker</h2><p id="19c63783-8c4c-4399-8840-bbe066e92e43" class="">The web application runs on Docker, a lightweight <strong>virtualization platform</strong> that allows developers to create, deploy and manage applications within containers. The choice of using Docker relies on the possibility of assign computational power to every container and also for its simplified deployment across different environments. </p><p id="3120dfb2-c9ae-4c48-add1-4e425d7b5d10" class="">In our configuration we set up two containers: one for the database and one for the web app, both connected to a dedicated virtual network. </p><h2 id="4ffab186-aa0b-40a0-921d-aca339a4a0d8" class="">1.2. Ruby (on Rails)</h2><p id="4139015d-5746-4e5b-bbe7-55ae71dd504f" class="">The used framework for our web application is Ruby on Rails which is based on Ruby language. It follows the <strong>Model-View-Controller (MVC)</strong> architectural pattern promoting convention over configuration, modularity design and abstractions. </p><p id="d7c22ee6-b064-40e2-89fd-6b6fa753ea67" class="">We decided to use Ruby (on Rails) mainly for its great performance with database interaction. For example, Ruby has an <strong>Object-Relational Mapping (ORM)</strong> system, called <strong>ActiveRecord</strong>, which abstracts the underlying database interactions allowing developers to work with database tables as if they were Ruby objects. The ORM also allow to abstract the underlying database, so that we don’t have to manually interact with Postgres. Rails also has a large community and a vast number of gems (Ruby’s libraries) that extend its functionality used to simplify our work. </p><h3 id="a025974c-8160-4006-9eb2-6ea7bd604a23" class="">1.2.1. Rails workflow</h3><p id="f299f628-4434-4291-8a87-097b1ba38a07" class="">To understand what Rails does, we can look into its workflow:</p><ol type="1" id="735dfa74-96d4-4dcc-ad48-0c2654633a2e" class="numbered-list" start="1"><li><strong>Listen for user’s requests</strong>: Rails listens at port 3000 waiting for http requests from users.</li></ol><ol type="1" id="a3947791-3065-4482-9318-a2be59bc9384" class="numbered-list" start="2"><li><strong>Convert</strong>: it analyses the request and converts it from ORM to SQL.</li></ol><ol type="1" id="a2b59291-c6b0-4816-b0dd-b09b122761eb" class="numbered-list" start="3"><li><strong>Send the query</strong>: it sends the SQL query to PostgreSQL. The database is listening at port 5432.</li></ol><ol type="1" id="ad2bbf4b-ecb7-4ce0-be35-6f091a5d8ba1" class="numbered-list" start="4"><li><strong>Serialize</strong>: it converts the received row into JSON.</li></ol><ol type="1" id="26ffa8d0-7522-43c3-9c54-006407679336" class="numbered-list" start="5"><li><strong>Response</strong>: it replies the data in JSON format.</li></ol><h2 id="ab3e1e1a-a9d6-4863-917d-3a80ec6392f4" class="">1.3. Database</h2><p id="0ce153d8-5fc9-48c3-bbd9-bd9f57bc8d99" class="">Our database is filled with the dataset provided by the Internet Movie Database. Better known as IMDb, it is one of the most comprehensive and widely used resource to search information on movies and TV shows, including plots, reviews, ratings and more.</p><h3 id="f552b11f-9ae6-40db-a2e3-14f9ad81c9e0" class="">1.3.1. PostgreSQL</h3><p id="b3676460-8899-4332-a282-b0190bf152dc" class="">We decided to use PostgreSQL, a relational database that allows us to efficiently define and manage relationships between various entities within our database. Our choice relies on its popularity, efficiency and for its native indexes support. During the development we found very useful PostgreSQL parallelization, which is a strength for the optimization phase. </p><h3 id="aa99f34d-762d-4626-927a-e34a244126d8" class="">1.3.2. IMDB Dataset</h3><p id="e8570424-31e2-4c7e-bc4e-00cd14992186" class="">The IMDb dataset is split into seven TSV files:</p><div id="762a33b6-8896-4e1d-80cb-1d5166cd838e" class="collection-content"><h4 class="collection-title"></h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesTitle"><path d="M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z"></path></svg></span>TSV file</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesText"><path d="M1.56738 3.25879H14.4258C14.7676 3.25879 15.0479 2.97852 15.0479 2.63672C15.0479 2.29492 14.7744 2.02148 14.4258 2.02148H1.56738C1.21875 2.02148 0.952148 2.29492 0.952148 2.63672C0.952148 2.97852 1.22559 3.25879 1.56738 3.25879ZM1.56738 6.84082H14.4258C14.7676 6.84082 15.0479 6.56055 15.0479 6.21875C15.0479 5.87695 14.7744 5.60352 14.4258 5.60352H1.56738C1.21875 5.60352 0.952148 5.87695 0.952148 6.21875C0.952148 6.56055 1.22559 6.84082 1.56738 6.84082ZM1.56738 10.4229H14.4258C14.7676 10.4229 15.0479 10.1426 15.0479 9.80078C15.0479 9.45898 14.7744 9.18555 14.4258 9.18555H1.56738C1.21875 9.18555 0.952148 9.45898 0.952148 9.80078C0.952148 10.1426 1.22559 10.4229 1.56738 10.4229ZM1.56738 14.0049H8.75879C9.10059 14.0049 9.38086 13.7246 9.38086 13.3828C9.38086 13.041 9.10742 12.7676 8.75879 12.7676H1.56738C1.21875 12.7676 0.952148 13.041 0.952148 13.3828C0.952148 13.7246 1.22559 14.0049 1.56738 14.0049Z"></path></svg></span>Content</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesMultipleSelect"><path d="M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z"></path></svg></span>Data structure</th></tr></thead><tbody><tr id="45183cb9-efa2-474d-8804-b52ed3b24968"><td class="cell-title"><a href="https://www.notion.so/title-basics-45183cb9efa2474d8804b52ed3b24968?pvs=21">title.basics</a></td><td class="cell-P_Bj">General information of titles</td><td class="cell-a\Ms"><span class="selected-value select-value-color-blue">Arrays</span><span class="selected-value select-value-color-green">Booleans</span><span class="selected-value select-value-color-red">Integers</span><span class="selected-value select-value-color-yellow">Strings</span></td></tr><tr id="55923958-3458-4cbb-b24b-1f9c33775bd7"><td class="cell-title"><a href="https://www.notion.so/title-akas-5592395834584cbbb24b1f9c33775bd7?pvs=21">title.akas</a></td><td class="cell-P_Bj">Title’s alternatives</td><td class="cell-a\Ms"><span class="selected-value select-value-color-blue">Arrays</span><span class="selected-value select-value-color-green">Booleans</span><span class="selected-value select-value-color-red">Integers</span><span class="selected-value select-value-color-yellow">Strings</span></td></tr><tr id="c776093a-adf3-4435-9982-1c48490c45ff"><td class="cell-title"><a href="https://www.notion.so/title-crew-c776093aadf3443599821c48490c45ff?pvs=21">title.crew</a></td><td class="cell-P_Bj">Director and writer information</td><td class="cell-a\Ms"><span class="selected-value select-value-color-blue">Arrays</span><span class="selected-value select-value-color-yellow">Strings</span></td></tr><tr id="cb483579-9bd6-430e-8556-22c372d2b527"><td class="cell-title"><a href="https://www.notion.so/title-episodes-cb4835799bd6430e855622c372d2b527?pvs=21">title.episodes</a></td><td class="cell-P_Bj">Series’ episode and seasons</td><td class="cell-a\Ms"><span class="selected-value select-value-color-red">Integers</span><span class="selected-value select-value-color-yellow">Strings</span></td></tr><tr id="dc36d4ba-4dcd-4d7d-9349-a7107818ea93"><td class="cell-title"><a href="https://www.notion.so/title-principals-dc36d4ba4dcd4d7d9349a7107818ea93?pvs=21">title.principals</a></td><td class="cell-P_Bj">Cast information</td><td class="cell-a\Ms"><span class="selected-value select-value-color-blue">Arrays</span><span class="selected-value select-value-color-red">Integers</span><span class="selected-value select-value-color-yellow">Strings</span></td></tr><tr id="0a09def1-0761-43df-a695-18520d3220cc"><td class="cell-title"><a href="https://www.notion.so/title-ratings-0a09def1076143dfa69518520d3220cc?pvs=21">title.ratings</a></td><td class="cell-P_Bj">IMDb rating and votes</td><td class="cell-a\Ms"><span class="selected-value select-value-color-purple">Floats</span><span class="selected-value select-value-color-red">Integers</span><span class="selected-value select-value-color-yellow">Strings</span></td></tr><tr id="0e8df8b8-7b59-46c4-bec3-e71f71ccdf69"><td class="cell-title"><a href="https://www.notion.so/name-basics-0e8df8b87b5946c4bec3e71f71ccdf69?pvs=21">name.basics</a></td><td class="cell-P_Bj">Personas’ informations</td><td class="cell-a\Ms"><span class="selected-value select-value-color-blue">Arrays</span><span class="selected-value select-value-color-red">Integers</span><span class="selected-value select-value-color-yellow">Strings</span></td></tr></tbody></table><br/><br/></div><h3 id="4d5a38cb-8ad9-41ee-90db-9037e18df9c2" class="">1.3.3.  Initial database structure </h3><p id="316324f3-37db-4ced-9b9f-c24dc856c394" class="">Since the IMDb dataset was not created following the entity-relation normalization rules, we decided to implement them into our database solution. </p><p id="a77a6dcf-f4d4-47b0-9ae2-5d4c170bd3d1" class="">Initially, for example, the genres owned by a title were an array of strings inside the <code>title_basics</code> table. This kind of implementation is massively inefficient since it leads to redundancy and lack of performance during the execution of queries. Unfortunately, it was also applied to many entities: name basics’ professions, title basics’ attributes and types were all stored inside arrays.</p><figure id="4941581e-4c92-4f3d-932e-02736d365f69" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/movies_development_-_public.png"><img style="width:2322px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/movies_development_-_public.png"/></a><figcaption>Entity relation diagram</figcaption></figure><p id="54832cc0-5b94-49c4-97ee-24adff2e9c07" class="">This is the main reason why we decided to model the database diagram from scratch. As you can see from the load tests results explained section 6, it turned out to be a great solution to increase the scalability of the system. Notice how the first implementation was without indexes: they will be added as a way to increase performance metrics.</p><h1 id="3368b080-a069-448d-8a68-308637646942" class="">2. Under the hood - Hardware</h1><p id="553bc04d-c0a6-49fb-911e-2b8bf9d6e6ad" class="">In this section we will explain the tools and hardware used to run the webapp and the tests.</p><h2 id="9e002750-5738-42e1-82ef-53cf004fd83d" class="">2.1. Devices</h2><p id="5711fc1c-43dc-4eb8-8c2b-719f2dcfc46c" class="">In this subsection we will present the hardware specifications of the devices used in the system. This information ensures that the testing machine has more computational power than the server.</p><h3 id="0b36a115-0b9c-48a5-af14-88675d6b551c" class="">2.1.1. Server</h3><p id="424373eb-ebf0-4d2b-ba9c-155242644a4d" class="">We wanted to create the most realistic scenario for a mid-low traffic website so, instead of a low-end laptop, we decided to dedicate a computer with some decent hardware:</p><table id="5e08bcbb-8891-41c7-83fe-924b46074069" class="simple-table"><tbody><tr id="53c7eb05-160c-46b2-96d9-479dcc9c04cd"><th id="L]om" class="simple-table-header-color simple-table-header" style="width:154px">CPU</th><td id="[Nf~" class="" style="width:577px">AMD Ryzen 7 5800X 8-cores, 16-threads, 3.8GHz - 4.7GHz</td></tr><tr id="deba3078-ba30-4e34-ad01-4790e297467c"><th id="L]om" class="simple-table-header-color simple-table-header" style="width:154px">RAM</th><td id="[Nf~" class="" style="width:577px">16GB DDR-4 3200MHz</td></tr><tr id="c934508d-9c94-45b1-9a93-01629d8a76d0"><th id="L]om" class="simple-table-header-color simple-table-header" style="width:154px">Disk</th><td id="[Nf~" class="" style="width:577px">SSD M.2 PCIe Gen4 - Read: 5.000 MB/s Write: 4.400 MB/s</td></tr><tr id="e42a0e31-e58e-419c-a03e-6e76fd7fd4cb"><th id="L]om" class="simple-table-header-color simple-table-header" style="width:154px">OS</th><td id="[Nf~" class="" style="width:577px">Ubuntu Desktop 24.04 LTS</td></tr><tr id="e7f7a3b1-df55-4cd8-b52b-9d00a124d269"><th id="L]om" class="simple-table-header-color simple-table-header" style="width:154px">CPU avg load (idle)</th><td id="[Nf~" class="" style="width:577px">0.06</td></tr><tr id="998b9d4e-309f-4109-a8c6-e51c01be5ab8"><th id="L]om" class="simple-table-header-color simple-table-header" style="width:154px">RAM avg load (idle)</th><td id="[Nf~" class="" style="width:577px">1GB</td></tr></tbody></table><h3 id="9a51162f-38da-4bf6-bbeb-f3d1389a70b4" class="">2.1.2. Testing machine </h3><p id="4961e003-dcd3-479c-b474-ac679c8cc29a" class="">The testing machine has the following specifications:</p><table id="882e556b-e3b0-4c93-b594-5cc4540e8fe7" class="simple-table"><tbody><tr id="2c6e7fad-79d4-4dda-9fab-d086fbf36b8c"><th id="L]om" class="simple-table-header-color simple-table-header" style="width:157px">CPU</th><td id="[Nf~" class="" style="width:577px">Intel Core i9-12900K 16-cores, 24-threads, 3.2GHz - 5.2GHz</td></tr><tr id="c54b0591-7e36-4604-ab98-67c070f7566e"><th id="L]om" class="simple-table-header-color simple-table-header" style="width:157px">RAM</th><td id="[Nf~" class="" style="width:577px">32GB DDR-5 4800MHz</td></tr><tr id="142e6c75-ba8f-48ad-aba4-f9e3251806c9"><th id="L]om" class="simple-table-header-color simple-table-header" style="width:157px">Disk</th><td id="[Nf~" class="" style="width:577px">SSD M.2 PCIe Gen4 - Read: 5.000 MB/s Write: 4.400 MB/s</td></tr><tr id="3ab017a9-5344-4d68-8ea2-38be54e1d889"><th id="L]om" class="simple-table-header-color simple-table-header" style="width:157px">OS</th><td id="[Nf~" class="" style="width:577px">Ubuntu Desktop 24.04 LTS</td></tr></tbody></table><h2 id="4ca8d33a-ac44-41a4-be6d-d8d32bc60b7c" class="">2.2. Connection</h2><p id="59eb6fb6-8100-4038-a6e2-7a004697133b" class="">The two devices are not physical connected so we had to develop a strategy that allows the testing machine and the server to talk each other. The ISP providing the internet connection to the server location doesn’t allow port forwarding, so a point-to-point connection was not an option. </p><h3 id="5d0f923b-91ae-4fb7-bbf1-06c195ddae2f" class="">2.2.1. ZeroTier</h3><p id="2fd4bb34-49dc-4ec9-832e-6baf1ca2a41c" class="">With all those technical and physical limitations, we decided to use ZeroTier, a software platform that provides network virtualization services. Our choice was leaded by its flexibility that allows to create an effective VPN/SDN (Software Defined Network) without relying on port forwarding: using ZeroTier’s server it’s possible to establish a peer-to-peer connection between, in this case, the server and the testing machine.</p><p id="340c046f-643f-4975-8a0d-2a41abf55e18" class="">This solution obviously adds extra latency that we have considered in our system modelling. On average the Round Trip Time between the two devices is about <mark class="highlight-default">34</mark><mark class="highlight-default">ms</mark><mark class="highlight-default">, </mark>with some peaks on the first connection (due to the handshake phase of peer-to-peer connection). </p><h3 id="13b6f3fc-6060-4708-8245-f98272ef006b" class="">2.2.2. Bandwidth</h3><p id="c566f92d-16c2-47fa-86bf-04e2d8401ac9" class="">As it can be seen later, the network speed has an huge impact on how we decided to work on improving the performances of the web application. </p><p id="d2bd618f-7fd5-4a4f-ad8a-8a7a687e8ffa" class="">In the table below we can clearly see the differences between the two networks.</p><table id="bb36b5ac-25df-421f-81f3-1afa15d661d5" class="simple-table"><thead class="simple-table-header"><tr id="f115685f-25d9-403b-a956-82f3ecefd2bd"><th id="ST?V" class="simple-table-header-color simple-table-header"></th><th id="mb;&lt;" class="simple-table-header-color simple-table-header">Download Speed Average</th><th id="LZgD" class="simple-table-header-color simple-table-header">Upload Speed Average</th></tr></thead><tbody><tr id="12b174e8-9346-4805-9926-01e2a8d48e29"><th id="ST?V" class="simple-table-header-color simple-table-header">Server’s Network</th><td id="mb;&lt;" class="">70 Mbps</td><td id="LZgD" class="">15 Mbps</td></tr><tr id="77c3bd6e-f55d-4936-b2cb-9f044c484daa"><th id="ST?V" class="simple-table-header-color simple-table-header">Testing Machine’s Network</th><td id="mb;&lt;" class="">170 Mbps</td><td id="LZgD" class="">30 Mbps</td></tr></tbody></table><p id="4e2a508f-7f5b-4a13-bafe-98a93fe0ff2e" class="">We can see that the network under which the testing machine is situated is way more performant both on download and upload speed. </p><h1 id="db1c7f10-e42e-4730-827d-eb1170df92ec" class="">3. System model and components</h1><p id="6a136d89-5f7a-44ec-a7ce-6effde428c01" class="">Our model is a closed system with a fixed number of users alternating a thinking phase with a submission phase. Although an open system would have been more realistic, we decided to model and test our system as a closed one. Our choice was lead mainly because a closed system will be always stable: fixing the number of users makes the analysis easier and less subjected to misinterpretations. </p><p id="29fb696b-aa9d-41d5-8355-8e0266cea9d9" class="">The system is interactive which means that users have an independent thinking phase. Since they may launch different requests (with different endpoints and execution times), we can also consider our model a multi-class system where each cluster of users can launch a job with the same probability. </p><figure id="fd862a20-9c80-49af-9a95-12aeec7751bd" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/System_Model.png"><img style="width:2560px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/System_Model.png"/></a><figcaption>System model schema</figcaption></figure><p id="756bf47a-7fa6-4bf1-9b1a-26f730857721" class="">Our system can be represented with 3 main stations:</p><ul id="ee895626-e1f9-4a49-982c-8ccbc4b26f3a" class="bulleted-list"><li style="list-style-type:disc"><strong>ZeroTier </strong>is the reference station. It includes the step necessary to establish the connection between the testing machine and the server. All users can send requests and receive responses to and from the webapp through this node. </li></ul><ul id="2e6766ff-5324-42ea-bcd3-69ee8f1e5623" class="bulleted-list"><li style="list-style-type:disc"><strong>Rails </strong>is the logic station. It collects requests from the ZeroTier station, generates queries and send them to PostgreSQL. The database response is processed by Rails and sent back to ZeroTier.</li></ul><ul id="1ade45b5-1035-4731-9bd5-967282a9af01" class="bulleted-list"><li style="list-style-type:disc"><strong>PostgreSQL</strong> is the database station. It manages all queries from Rails and sends back the answer to the previous station. </li></ul><h1 id="247aa73b-4634-413e-9f17-342335b8d709" class="">4. First unoptimized version</h1><p id="d47c6549-8349-44e0-bdd7-dd483b9540a2" class="">The model presented in this section is at its first version, consequently it does not include any performance improvement. The following information should help to understand the steps we made to identify an optimal number of users and where is the bottleneck.</p><h2 id="a3eb262e-4bd3-49d0-ba88-1228972f6b15" class="">4.1. Query-set generation</h2><p id="766c9cda-0191-4f52-a9ed-1a8399c860bc" class="">In order to discover the performance of our web application we decided to generate some materialized view, more specifically choosing which actors, directors and movie were more likely to be searched. We calculated probabilities based on ratings and then we ordered the 3 categories based on how many people rated the same movie and how high the rate is. The query-set is available as <code>querysets.csv</code>  in the project folder.</p><h2 id="d80194ec-9f6a-436c-a446-32846c01680f" class="">4.2. Resources allocation</h2><p id="106b3bdf-3acd-4385-b032-bf46d6d54283" class="">Our server machine has 8 cores with 16 threads that can be assigned manually to each Docker container fixing a maximum value to Rails and PostgreSQL. In the design phase, we decided to assign CPU resources in a non-equal way. The computational power of our Ryzen 7 is distributed as shown in the following table:</p><div id="11d03b34-4aeb-4c2b-aa66-032076b88f31" class="collection-content"><h4 class="collection-title"></h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesTitle"><path d="M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z"></path></svg></span>Component</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Cores normally assigned</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Maximum cores usable</th></tr></thead><tbody><tr id="b6fab992-d320-4c7f-b402-f78ae8f8d124"><td class="cell-title"><a href="https://www.notion.so/System-b6fab992d3204c7fb402f78ae8f8d124?pvs=21">System</a></td><td class="cell-:[&gt;a">1</td><td class="cell-l|XD">2</td></tr><tr id="d78b1f1e-189a-432c-b03e-ff7561dfc1ca"><td class="cell-title"><a href="https://www.notion.so/Rails-d78b1f1e189a432cb03eff7561dfc1ca?pvs=21">Rails</a></td><td class="cell-:[&gt;a">10</td><td class="cell-l|XD">10</td></tr><tr id="71c55b64-a556-4b3a-86f3-a162bb1abc1c"><td class="cell-title"><a href="https://www.notion.so/PostgreSQL-71c55b64a5564b3a86f3a162bb1abc1c?pvs=21">PostgreSQL</a></td><td class="cell-:[&gt;a">3</td><td class="cell-l|XD">4</td></tr></tbody></table><br/><br/></div><p id="299e264e-eb12-4fee-8b56-28a9c0777566" class="">Instead of assigning all the cores to the two Docker containers, we decided to reserve some computational power for Ubuntu to prevent degradation in some operation such SSH connections, system and network monitor softwares and other tools like ZeroTier. On average 1 core was sufficient, so technically it was possible to reserve 4 cores to PostgreSQL (instead of 3 + 1). In order to prevent any issue with the previous operations, we decided to allow the OS to “steal” a core from the PostgreSQL container. </p><h2 id="0b8aad8f-bfd1-479a-9ab5-ab735d60d87f" class="">4.3. Finding the optimal number of users</h2><p id="5935da06-4f97-41de-bcdc-99b72aceda5e" class="">Looking for the optimal number of users for our test it’s a tricky part since you can not under or overestimate it, and it should be a value suitable for all the type of jobs. To obtain a sufficiently correct value, we followed these steps:</p><ol type="1" id="cc389835-bd68-45c9-ac11-d0da10d5c0a1" class="numbered-list" start="1"><li><strong>Identify</strong> a mid-intensity job.</li></ol><ol type="1" id="6c3845f2-18fb-47f5-87da-1377c3bd8e97" class="numbered-list" start="2"><li><strong>Test</strong> it with a different number of users (⇒ single class test).</li></ol><ol type="1" id="53dd62e7-d275-441a-a841-fa41d9d2f962" class="numbered-list" start="3"><li><strong>Observe</strong> when the system reaches the set limit for the response time.</li></ol><ol type="1" id="61930077-f280-4436-9d49-a646f0b9e4d8" class="numbered-list" start="4"><li><strong>Define</strong> the optimal number of users by looking at how many users the system is able to handle.</li></ol><h3 id="6f947fa0-ca8d-4754-9e9b-30a161a2b082" class="">4.3.1. Classes of jobs for testing </h3><p id="2274a755-766d-418f-b4b2-935240071270" class="">There is a multiplicity of requests that the webapp can manage, but testing all of them can be challenging. We still wanted to obtain realistic results so we decided to send 4 types of requests  testing the webapp capability of managing simple and composed queries. The following classes are used for all tests:</p><ol type="1" id="cb463325-6f4d-4a59-8133-fb7f62c8ccbc" class="numbered-list" start="1"><li>Search <strong>actors by name: </strong>it allows a user to search an actor by its name and gets as a response a json file containing the actors’ personal data, their professions and the titles for which they are famous (it relies on known_for_titles field).<strong><br/><br/></strong>An example can be: <code>http://{{host}}/actors?page=1&amp;name=Leonardo DiCaprio</code></li></ol><ul id="cbb1fb94-c108-40fe-8fe4-c0f4a1156a14" class="bulleted-list"><li style="list-style-type:disc">Search <strong>directors by name</strong>: it allows a user to search a director by its name and gets as response the same pieces of information discussed for the actors.<br/>An example can be: <br/><code>http://{{host}}/directors?page=1&amp;name=Christopher Nolan</code></li></ul><ul id="5e882f87-9cf9-4416-b052-17c92c7a4a66" class="bulleted-list"><li style="list-style-type:disc">Search <strong>title by primary title</strong>: it allows a user to search a movie by its primary title and gets as a response the pieces of informations about the title, its ratings and genres.<br/>An example can be: <br/><code>http://{{host}}/title_basics?title=Interstellar&amp;page=1</code></li></ul><ul id="160a9723-b3f6-49fe-a29e-aeaa6474f690" class="bulleted-list"><li style="list-style-type:disc">Search <strong>titles by params</strong>: it allows a user to set some parameters to find titles matching the specified requirements. The response is the same as title by primary title. The considered parameters are:<ul id="6d3d7e13-e0ec-43d9-8e2c-b5204bf1a5f3" class="bulleted-list"><li style="list-style-type:circle">is adult: <code>http://{{host}}/title_basics?page=1&amp;adult=true</code></li></ul><ul id="0cf1e6e5-9aad-486c-83d2-5106ae4dec51" class="bulleted-list"><li style="list-style-type:circle">max runtime minutes: <code>http://{{host}}/title_basics?page=1&amp;max_runtime=30</code></li></ul><ul id="d18ebde1-7cf4-46a0-b502-3b7585184e39" class="bulleted-list"><li style="list-style-type:circle">genre: <code>http://{{host}}/title_basics?page=1&amp;genre=Fantasy</code></li></ul></li></ul><p id="a8de0f29-54d7-4e67-88b8-9f15d82f45aa" class="">Based on the average service time for a single request, we classified the jobs as follows:</p><div id="9d58d2ca-2560-44f4-b59f-8516a3745bc1" class="collection-content"><h4 class="collection-title"></h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesTitle"><path d="M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z"></path></svg></span>Job</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Response time (avg) in ms</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesSelect"><path d="M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 13.7383C4.85547 13.7383 2.33301 11.209 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.6738 4.91992 13.6738 8.06445C13.6738 11.209 11.1445 13.7383 8 13.7383ZM7.62402 10.6348C7.79492 10.915 8.20508 10.9287 8.37598 10.6348L10.666 6.73145C10.8574 6.41016 10.7002 6.04102 10.3652 6.04102H5.62793C5.29297 6.04102 5.14941 6.43066 5.32031 6.73145L7.62402 10.6348Z"></path></svg></span>Intensity</th></tr></thead><tbody><tr id="f79b697e-cba9-4069-bdce-afd422cae562"><td class="cell-title"><a href="https://www.notion.so/Actors-by-name-f79b697ecba94069bdceafd422cae562?pvs=21">Actors by name</a></td><td class="cell-[GE;">6800</td><td class="cell-c}`i"><span class="selected-value select-value-color-red">High</span></td></tr><tr id="f87bc8f5-7651-40f0-9a55-8100428a4bfa"><td class="cell-title"><a href="https://www.notion.so/Directors-by-name-f87bc8f5765140f09a558100428a4bfa?pvs=21">Directors by name</a></td><td class="cell-[GE;">1300</td><td class="cell-c}`i"><span class="selected-value select-value-color-orange">Medium</span></td></tr><tr id="b76dd5e8-bdda-4b70-aa3d-d41d043a1910"><td class="cell-title"><a href="https://www.notion.so/Title-by-primary-title-b76dd5e8bdda4b70aa3dd41d043a1910?pvs=21">Title by primary title</a></td><td class="cell-[GE;">290</td><td class="cell-c}`i"><span class="selected-value select-value-color-green">Low</span></td></tr><tr id="f801899d-8b19-4cd2-8f1a-74bf7d5caf74"><td class="cell-title"><a href="https://www.notion.so/Title-by-params-f801899d8b194cd28f1a74bf7d5caf74?pvs=21">Title by params</a></td><td class="cell-[GE;">310</td><td class="cell-c}`i"><span class="selected-value select-value-color-green">Low</span></td></tr></tbody></table><br/><br/></div><h3 id="7a3d041d-bc1a-4679-968d-009989299c3a" class="">4.3.2. Finding optimal number of users for Directors by name</h3><p id="8089d51e-26de-4b2a-8e57-f7c13223a36b" class="">From the previous table, we can identify “Directors by name” as the mid-intensity job that we will use to find the optimal number of users. </p><p id="a4c5c337-2793-4b07-baf3-43be9d49604b" class="">Our test is performed using Apache JMeter, an open-source application designed for load testing and performance metrics of a system. In our case, it generates heavy load traffic on the webapp’s server. We configured JMeter to let it perform 7 sub-tests with this configuration:</p><table id="100d5bd1-dfa8-48d2-bfbb-7fb69321a345" class="simple-table"><thead class="simple-table-header"><tr id="f669d9a1-ab80-46c3-912e-1adc4d5a5e5f"><th id="jNZF" class="simple-table-header-color simple-table-header" style="width:345px">Parameter</th><th id="JHov" class="simple-table-header-color simple-table-header" style="width:345px">Value</th></tr></thead><tbody><tr id="ef6730de-a8d0-4ffd-89f5-a2f033cc10ff"><td id="jNZF" class="" style="width:345px">Number of user</td><td id="JHov" class="" style="width:345px">5, 10, 20, 80, 100, 200, 400</td></tr><tr id="536beb4d-3107-448a-b44d-b3da0ce73e0b"><td id="jNZF" class="" style="width:345px">Ramp-up</td><td id="JHov" class="" style="width:345px">30s</td></tr><tr id="6357211a-4b6b-4a5a-a02f-293d60248550"><td id="jNZF" class="" style="width:345px">Thinking time</td><td id="JHov" class="" style="width:345px">1100ms</td></tr><tr id="6274964b-e003-49a3-b2b2-8374ae2e3612"><td id="jNZF" class="" style="width:345px">Duration (for each sub-test)</td><td id="JHov" class="" style="width:345px">1200s</td></tr></tbody></table><p id="c238f1c9-16ba-42c2-af53-721e75df299b" class="">From the JMeter CSV output, we can obtain a plot offering a complete overview of the response times from 5 to 400 users.</p><figure id="410b3afa-ac09-4783-895b-f12170d1dda2" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled.png"><img style="width:708px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled.png"/></a><figcaption>Average response time VS number of users for DIrectors by name</figcaption></figure><p id="c2470a12-25ec-4473-88bc-f1cdc8f7e9a4" class="">In the design phase, we decided that our limit has to be around 4 seconds. Looking at the CSV file, we can see that the limit of 4 seconds is reached when 15 users are in the system:</p><table id="a4042f01-7c88-4b07-889d-6c38950c7988" class="simple-table"><thead class="simple-table-header"><tr id="14afe244-7f16-45d4-a8f5-97a1e9900eef"><th id="M?Rh" class="simple-table-header-color simple-table-header" style="width:230px">Timestamp ID</th><th id="X]@~" class="simple-table-header-color simple-table-header" style="width:230px">Number of user</th><th id="ggcf" class="simple-table-header-color simple-table-header" style="width:230px">Response time</th></tr></thead><tbody><tr id="1a1129e6-6390-4e68-9164-d69597b85757"><td id="M?Rh" class="" style="width:230px">1718900331989</td><td id="X]@~" class="" style="width:230px">14</td><td id="ggcf" class="" style="width:230px">3236ms</td></tr><tr id="8af0c2f0-6f22-4211-a670-98f3d7800e89"><td id="M?Rh" class="" style="width:230px">1718900331989</td><td id="X]@~" class="" style="width:230px">14</td><td id="ggcf" class="" style="width:230px">3236ms</td></tr><tr id="079a6b0f-c582-4e31-9363-03eb9465df2b"><td id="M?Rh" class="" style="width:230px">1718900333151</td><td id="X]@~" class="" style="width:230px">15</td><td id="ggcf" class="" style="width:230px">4045ms</td></tr><tr id="d8cbf730-d7eb-491d-9145-11c56fa663f6"><td id="M?Rh" class="" style="width:230px">1718900333151</td><td id="X]@~" class="" style="width:230px">15</td><td id="ggcf" class="" style="width:230px">4045ms</td></tr><tr id="396c45b6-6cbf-4565-b945-b4bcafc325c7"><td id="M?Rh" class="" style="width:230px">1718900333533</td><td id="X]@~" class="" style="width:230px">15</td><td id="ggcf" class="" style="width:230px">3966ms</td></tr><tr id="5eef750b-4bdf-4920-b1bd-cf43bae5432d"><td id="M?Rh" class="" style="width:230px">1718900333533</td><td id="X]@~" class="" style="width:230px">15</td><td id="ggcf" class="" style="width:230px">3966ms</td></tr><tr id="e3636981-fb8b-4858-8e48-0090ede02eca"><td id="M?Rh" class="" style="width:230px">1718900333514</td><td id="X]@~" class="" style="width:230px">16</td><td id="ggcf" class="" style="width:230px">4446ms</td></tr><tr id="0a74389b-2e0b-4d00-8618-95bb5e054c75"><td id="M?Rh" class="" style="width:230px">1718900333514</td><td id="X]@~" class="" style="width:230px">16</td><td id="ggcf" class="" style="width:230px">4446ms</td></tr></tbody></table><p id="b835459e-cf5c-4090-8005-88a55a837e1c" class="">From this experiment, we can set our optimal number of users to 15.</p><h2 id="6decf56f-3f73-4942-a8fe-0af377de6d0d" class="">4.4. Testing all classes</h2><p id="29bd3535-cd25-4adc-a6f6-dda0a96782ac" class="">We are ready to perform the first complete test with JMeter; this time we will analyze not only the response time for Directors by name, but we will include jobs from Actors by name, Title by primary title and Title by parameters. Finally, we will run a mixed test where all the requests will be sent in sequential order.</p><h3 id="97ae5a4c-b139-4318-bea3-4475bc052c4b" class="">4.4.1. JMeter configuration </h3><p id="e770e40e-ad9a-43fd-9fd7-4156dad7257e" class="">Based on the test type, we set up JMeter in two different ways:</p><ol type="1" id="749f47bb-bb92-4a7f-85c3-c2b6cf0ed401" class="numbered-list" start="1"><li><strong>Standalone test</strong><table id="6ecb0538-eafb-47da-9dd6-52f118caf2f2" class="simple-table"><thead class="simple-table-header"><tr id="4646cb01-ebbd-48f0-ba1c-df3fa7322849"><th id="jNZF" class="simple-table-header-color simple-table-header" style="width:331px">Parameter</th><th id="JHov" class="simple-table-header-color simple-table-header" style="width:326px">Value / job</th></tr></thead><tbody><tr id="5458c65b-3c60-4899-be6d-fd92abde917e"><td id="jNZF" class="" style="width:331px">Number of user</td><td id="JHov" class="" style="width:326px">15</td></tr><tr id="50f2e918-fa92-4a2f-9f86-584a7718a0c4"><td id="jNZF" class="" style="width:331px">Ramp-up</td><td id="JHov" class="" style="width:326px">10s</td></tr><tr id="36819640-eebf-42d5-912e-25c63befc18d"><td id="jNZF" class="" style="width:331px">Thinking time</td><td id="JHov" class="" style="width:326px">1100ms</td></tr><tr id="9902d052-6f0e-415b-92c6-751184d933da"><td id="jNZF" class="" style="width:331px">Additional variable thinking time (lambda)</td><td id="JHov" class="" style="width:326px">100ms</td></tr><tr id="0df51650-2484-46c7-a64e-f5befabe9916"><td id="jNZF" class="" style="width:331px">Duration (for each sub-test)</td><td id="JHov" class="" style="width:326px">600s</td></tr><tr id="abaa42a5-3b73-4755-975d-7be99b6bf0ea"><td id="jNZF" class="" style="width:331px">Sub-tests</td><td id="JHov" class="" style="width:326px">Title by primary title<br/>Title by parameters<br/>Directors by name<br/>Actors by name<br/></td></tr></tbody></table></li></ol><ol type="1" id="ff78efa7-7e52-40fa-b3ed-7ce082284a1a" class="numbered-list" start="2"><li><strong>Mixed test</strong><table id="c5dd1ba3-2f35-45b6-833e-b06ab630849d" class="simple-table"><thead class="simple-table-header"><tr id="bca9ab7e-7022-4c9d-9474-91aee57c4569"><th id="jNZF" class="simple-table-header-color simple-table-header" style="width:331px">Parameter</th><th id="JHov" class="simple-table-header-color simple-table-header" style="width:326px">Value / job</th></tr></thead><tbody><tr id="65eb0300-77d5-400b-9dba-839e0914e3eb"><td id="jNZF" class="" style="width:331px">Number of user</td><td id="JHov" class="" style="width:326px">15</td></tr><tr id="9f49f5b2-9dbe-4067-aa86-e9206159207b"><td id="jNZF" class="" style="width:331px">Ramp-up</td><td id="JHov" class="" style="width:326px">5s</td></tr><tr id="7720be22-acd0-4b35-8c38-5e78e82bd63c"><td id="jNZF" class="" style="width:331px">Thinking time</td><td id="JHov" class="" style="width:326px">1100ms</td></tr><tr id="606e4933-5650-40cf-8c54-739456f00db3"><td id="jNZF" class="" style="width:331px">Additional variable thinking time (lambda)</td><td id="JHov" class="" style="width:326px">100ms</td></tr><tr id="60a9c6ae-e3f1-4a17-8fb9-6678bf05ad64"><td id="jNZF" class="" style="width:331px">Duration</td><td id="JHov" class="" style="width:326px">1200s</td></tr></tbody></table></li></ol><h3 id="fb4b17af-17b6-46e1-835c-01839ee9138b" class="">4.4.2. Standalone tests results</h3><figure id="7e54b26f-7aaa-4881-81dc-e6197b37e28f" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Screenshot_2024-06-24_at_18.24.52.png"><img style="width:1850px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Screenshot_2024-06-24_at_18.24.52.png"/></a><figcaption>Average response time VS number of users for all the classes</figcaption></figure><h3 id="b73dabb5-f3b0-43ad-a62c-fe7e4a7b694b" class="">4.4.3. Mixed test results</h3><div id="ce8c4009-2300-486f-ac85-25b5d4e135bf" class="collection-content"><h4 class="collection-title"></h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesTitle"><path d="M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z"></path></svg></span>Job</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Samples</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Error</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>AVG Response time</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>MAX Response time</th></tr></thead><tbody><tr id="9f5e7175-c84d-409c-a54d-450e8531e619"><td class="cell-title"><a href="https://www.notion.so/Actors-by-name-9f5e7175c84d409ca54d450e8531e619?pvs=21">Actors by name</a></td><td class="cell-XtpW">370</td><td class="cell-avDf">0%</td><td class="cell-gV@U">34008.35</td><td class="cell-H&gt;u=">38495</td></tr><tr id="18fa483f-773c-4754-99fd-2804eea1a495"><td class="cell-title"><a href="https://www.notion.so/Directors-by-name-18fa483f773c475499fd2804eea1a495?pvs=21">Directors by name</a></td><td class="cell-XtpW">391</td><td class="cell-avDf">0%</td><td class="cell-gV@U">6549.54</td><td class="cell-H&gt;u=">7908</td></tr><tr id="f1f3531b-6969-4548-afc5-a15dff492c0e"><td class="cell-title"><a href="https://www.notion.so/Title-by-parameters-f1f3531b69694548afc5a15dff492c0e?pvs=21">Title by parameters</a></td><td class="cell-XtpW">398</td><td class="cell-avDf">6.03%</td><td class="cell-gV@U">538.93</td><td class="cell-H&gt;u=">7293</td></tr><tr id="65988c4a-34cf-4cba-9d50-b51f20a864e3"><td class="cell-title"><a href="https://www.notion.so/Title-by-primary-title-65988c4a34cf4cba9d50b51f20a864e3?pvs=21">Title by primary title</a></td><td class="cell-XtpW">397</td><td class="cell-avDf">0%</td><td class="cell-gV@U">2106.87</td><td class="cell-H&gt;u=">4717</td></tr><tr id="7fb37bf4-496f-454c-8ef5-95c39d4e1def"><td class="cell-title"><a href="https://www.notion.so/TOTAL-7fb37bf4496f454c8ef595c39d4e1def?pvs=21">TOTAL</a></td><td class="cell-XtpW">1556</td><td class="cell-avDf">1.54%</td><td class="cell-gV@U">10408.02</td><td class="cell-H&gt;u=">38495</td></tr></tbody></table><br/><br/></div><figure id="7803c50b-0cd6-476e-973f-87e033aa6991" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Screenshot_2024-06-24_at_18.24.32.png"><img style="width:1826px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Screenshot_2024-06-24_at_18.24.32.png"/></a><figcaption>Average response time for class VS elapsed time</figcaption></figure><h3 id="2cbc9996-8c76-44e7-aed3-1bf798e848ae" class="">4.4.4. Identify the bottleneck</h3><p id="f1ce2556-63bc-481b-9b70-ae26aa57d520" class="">Analyzing the plots, we can state that the heaviest job is clearly “Actors by name”. Then we have taken a look at the average service times provided by each station and it turned out that the bottleneck station was PostgreSQL, with an average query time of 5s and a CPU utilization of 100% since the first request. Eventually, it was the PostgreSQL station to slow down the average response time for each class. This is the starting point from which we have based the system tuning and optimizations.</p><h1 id="46d369b1-cf85-4676-83ed-d297e1480bd7" class="">5. Tuning</h1><h3 id="af08404c-d654-4b38-9ba0-77de2164d073" class="">5.1. Cores assignment</h3><p id="b47ca336-0ba5-4ba1-9885-95c90c54270b" class="">During the first test, we have noticed how the CPU utilization for PostgreSQL reaches 100% while Rails barely used one out of ten cores assigned to it. So, the first improvement we decided to do was to re-distribute the cores in a more balanced way:</p><div id="d40470e5-47c4-4501-be8e-f1fc314f591d" class="collection-content"><h4 class="collection-title"></h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesTitle"><path d="M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z"></path></svg></span>Component</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Cores normally assigned</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Maximum cores usable</th></tr></thead><tbody><tr id="ddc7539c-11b2-40d8-abed-961beefe83ec"><td class="cell-title"><a href="https://www.notion.so/System-ddc7539c11b240d8abed961beefe83ec?pvs=21">System</a></td><td class="cell-:[&gt;a">2</td><td class="cell-l|XD">2</td></tr><tr id="dd344641-707e-4286-8db7-99f360ed0cb1"><td class="cell-title"><a href="https://www.notion.so/Rails-dd344641707e42868db799f360ed0cb1?pvs=21">Rails</a></td><td class="cell-:[&gt;a">7</td><td class="cell-l|XD">7</td></tr><tr id="8610579a-0002-43be-b68a-2b17a44e1a57"><td class="cell-title"><a href="https://www.notion.so/PostgreSQL-8610579a000243beb68a2b17a44e1a57?pvs=21">PostgreSQL</a></td><td class="cell-:[&gt;a">7</td><td class="cell-l|XD">7</td></tr></tbody></table><br/><br/></div><p id="d13d38a6-f97e-48b8-b71f-6b0aaf2804e3" class="">Adjusting the assigned cores we noticed a significant improvement in PostgreSQL parallelization but the average response times for a single request still remained unchanged. Looking at PostgreSQL’s documentation we found that assigning more core will not speed up a single query, but allows Rails to send more queries according to the cores quantity assigned to PostgreSQL (10 cores → 10 queries processed simultaneously) . </p><h3 id="5512e23f-1463-4707-ac7f-64e96cd5df9e" class="">5.2. Rails cache</h3><p id="534c04fb-2f96-49fb-85a4-fc492ab21122" class="">Then we started to speed up the response time for single requests. We enhanced Ruby on Rails performance by relying on the <strong>Rails built-in cache system</strong>, which allows to skip queries that were previously processed within 15 minutes.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="bc3fbae4-c085-4862-a8d6-640ad0d03853" class="code"><code class="language-Ruby">cache_key = CacheKeys.actor_cache_key(params)

@actors = Rails.cache.fetch(cache_key, expires_in: 15.minutes) do
  # query on actors table if the cache key is not found
end

render json: @actors</code></pre><p id="aeb29430-cfc0-40c8-96d8-7a6e6ca835cd" class="">The <strong>fetch method</strong> is used in conjunction with the caching mechanisms to read and write values into the cache. This method simplifies the process of checking if a cached value exists and, if not, computing and storing it.</p><p id="b39a647d-dd76-440d-ae37-4eb200a4f25a" class="">The cache key is generated combining all the <strong>parameters</strong> that are passed into the request.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="139e37f9-0702-44f7-8c23-7603a587da79" class="code"><code class="language-Ruby">def self.actor_cache_key(params)
    name = params[:name]
    page = params[:page] || 1
    &quot;actors/#{name}/page/#{page}&quot;
end</code></pre><p id="83a01512-c22a-403f-bd11-e457d30a3dcc" class="">The same process is applied for all types of resources: actors, directors and titles.</p><h3 id="a7159ef6-1572-413d-a7ca-92378a0ee216" class="">5.3. PostgreSQL indexes</h3><p id="f75c9e71-0443-4279-a251-26bad8aea5bd" class="">PostgreSQL database indexes are created in order to increase queries efficiency.</p><p id="959dc31a-5779-48fc-ac16-0d6658a35f70" class="">They are applied on table columns that are crucial for queries performance:</p><ul id="ac138464-9c59-4ce3-84fa-c5c8a403cdd5" class="bulleted-list"><li style="list-style-type:disc"><strong>primary_title</strong>, <strong>runtime_minutes</strong>, <strong>adult</strong> in titles table;</li></ul><ul id="0041f6fa-b47a-48b4-a70a-68ca6426f129" class="bulleted-list"><li style="list-style-type:disc"><strong>genre name</strong> in genres table;</li></ul><ul id="20e44ae7-06b1-4b78-92a1-4a0c94ee92af" class="bulleted-list"><li style="list-style-type:disc">All <strong>foreign keys</strong> involved into the queries.</li></ul><p id="1ab5a8f7-6d85-45da-a538-734698a369db" class="">On the <strong>primary keys</strong> the indexes are already applied by Ruby on Rails.</p><h3 id="42c005e4-7af2-470a-9e38-3315d4ffef02" class="">5.4. Queries tuning</h3><p id="7d1f1a15-ef15-4c15-8db3-6cc866f9243b" class="">In order to effectively boost the performance and take advantage of the PostgreSQL indexes, we decided to improve the queries.</p><p id="0fff7708-e6b1-44ca-814b-53a650d8fc2f" class="">One important aspect that has been changed from the non-optimal software solution is the way the queries search for the records in the table.</p><p id="ea4138e0-10da-4d79-a66e-4f360016aca3" class="">In the first version, the queries looked like this:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="ed7a43a1-dbb3-4df8-8a2f-ea620b6fdbbc" class="code"><code class="language-Ruby">@actors = NameBasic.joins(:professions)
                  .where(&#x27;professions.name IN (?)&#x27;, %w[actor actress])
@actors = @actors.where(&#x27;primary_name LIKE ?&#x27;, &quot;%#{name}%&quot;) if name.present?
@actors = @actors.paginate(page: page, per_page: 15)</code></pre><p id="565515fb-b210-49bd-8f53-d311428da937" class=""><code><strong>LIKE</strong></code> operator is used for pattern matching within string fields. It allows you to search for a specified pattern within a column of textual data. This approach is useful to get multiple results even though the string is not completed yet (a user is likely to search “DiCaprio” to obtain the full name of the actor “Leonardo DiCaprio”).</p><p id="fd2a1545-a685-436b-9446-eafebea7621f" class="">Nevertheless, this approach has many drawbacks in terms of performance. To solve this, we decided to change the operator to <code><strong>=</strong></code><strong> </strong>with the purpose to rely completely on the PostgreSQL indexes.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="0092193b-86f7-40db-8f1e-827b2f9497e3" class="code"><code class="language-Ruby">@actors = NameBasic.joins(:professions)
                 .where(&#x27;professions.name IN (?)&#x27;, %w[actor actress])
@actors = @actors.where(&#x27;primary_name = ?&#x27;, name.to_s) if name.present?
@actors = @actors.paginate(page: page, per_page: 15)</code></pre><h3 id="d3894cd5-5d06-47be-9fe6-31bc1e067aff" class="">5.5. Cores assignment (again)</h3><p id="0c0cb6bc-82c4-43a8-b5c2-78205ce15b3f" class="">The improvement presented above, has required a new core assignment. Thanks to the cache, PostgreSQL requests dropped significantly and the indexes speeded up the time necessary to perform a query. Meanwhile, Rails has now more requests to manage and also needs some computational power to manage the cache. After performing some intermediate tests, we finally found a core assignment that doesn’t waste cores but gives the right computational power to each container:</p><div id="145c8476-3993-44d5-bcae-63e86b8f5462" class="collection-content"><h4 class="collection-title"></h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesTitle"><path d="M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z"></path></svg></span>Component</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Cores normally assigned</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Maximum cores usable</th></tr></thead><tbody><tr id="c6c3ca3c-a76a-476e-bd73-fa0657a74a46"><td class="cell-title"><a href="https://www.notion.so/System-c6c3ca3ca76a476ebd73fa0657a74a46?pvs=21">System</a></td><td class="cell-:[&gt;a">1</td><td class="cell-l|XD">2</td></tr><tr id="996b1b20-b337-4e6b-b0f3-36a5ae6b36c3"><td class="cell-title"><a href="https://www.notion.so/Rails-996b1b20b3374e6bb0f336a5ae6b36c3?pvs=21">Rails</a></td><td class="cell-:[&gt;a">9</td><td class="cell-l|XD">9</td></tr><tr id="0afee3a1-c0bc-4839-8209-a47f70150c7f"><td class="cell-title"><a href="https://www.notion.so/PostgreSQL-0afee3a1c0bc48398209a47f70150c7f?pvs=21">PostgreSQL</a></td><td class="cell-:[&gt;a">4</td><td class="cell-l|XD">5</td></tr></tbody></table><br/><br/></div><p id="2a2f9974-e257-4b2e-8f86-e3e19c15bf1f" class="">Unlike the previous configurations, this time we decided to leave on idle a core (in “normally assigned”) because in the previous steps we didn’t consider Docker’s virtualization services. The network management starts to require some computational power to manage all connections between our server and the testing machine.</p><h1 id="5dd43c97-4c71-4214-8042-b7f189185a2c" class="">6. Final tests</h1><p id="2b1f3d59-3d07-4eff-bf32-663fe0cff171" class="">Since this section can be confusing, we draw a simple roadmap to help chronologically collocate all the steps and understand our workflow. We decided to explain the debug process to illustrate the real capabilities of the webapp itself excluding the ZeroTier station with the goal to reach the real bottleneck.</p><figure id="006fcfd1-99ac-4e7f-ac57-4bb5a9225904" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%201.png"><img style="width:590px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%201.png"/></a><figcaption>Workflow roadmap</figcaption></figure><h2 id="ffadff78-71fd-4d98-a9d6-fb024be51d2e" class="">6.1. Finding the optimal number of users</h2><h3 id="92408d07-2e39-4689-a302-ce8328f498b3" class="">6.1.1. Replicate the previous test</h3><p id="82d09095-02d7-4c26-af6c-7dee35fbf85d" class="">In order to obtain comparable results, we run the same test that has been done in the first one (section 4.2.2) to find the optimal number of users for the mid-intensity job “Directors by name”. Recall that, previously, the webapp could manage 15 users with an average response time of 4 seconds. </p><figure id="bcf90717-1a10-4689-8265-23e125b31c8c" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/WhatsApp_Image_2024-06-22_at_18.33.24.jpeg"><img style="width:960px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/WhatsApp_Image_2024-06-22_at_18.33.24.jpeg"/></a><figcaption>Average response time for Directors by name</figcaption></figure><p id="c5cf0a2e-9bb8-41a2-a3ae-48fc78e5c75c" class="">As we can see from the graph above, this time we can fully manage 400 users with an average response time of 52ms. We can host more visitors. </p><p id="720a64e9-6716-49bc-8a85-1d3ce803c7b0" class="">Please focus on the system’s behavior: at the beginning of the load test, we can see the average response time is about 60ms and then it drops to 48ms when the arrival users are about 70-75. This happens before the Rails cache is full, because more are the users, more are the responses that are cached and, consequently, less is the average response time. Once the arrival users reach 200, the average response time starts to grow in a linear way as expected for a closed system.</p><h3 id="94665b61-6cab-41c3-8db3-a056b677f1b9" class="">6.1.2. A more realistic test </h3><p id="186c6ccf-a2eb-4669-9c32-5c9d9609fa18" class="">As we saw, 400 users can be managed easily, so we tried to increase the number of users and launch again the mid-intensity test. We also changed the JMeter parameters to make it more reliable:</p><table id="bc01f76d-1a98-4d3c-9c0b-acfc62ce5ae6" class="simple-table"><thead class="simple-table-header"><tr id="15291667-f4ff-4761-9ab0-6a033eb63562"><th id="jNZF" class="simple-table-header-color simple-table-header" style="width:331px">Parameter</th><th id="JHov" class="simple-table-header-color simple-table-header" style="width:326px">Value / job</th></tr></thead><tbody><tr id="7b139a01-c5d3-44f1-99b5-cdfba4c9390f"><td id="jNZF" class="" style="width:331px">Number of user</td><td id="JHov" class="" style="width:326px">400, 600, 800, 1000, 1200</td></tr><tr id="6e5fff32-4b1e-460c-bdfd-ecc76cea2a6c"><td id="jNZF" class="" style="width:331px">Ramp-up</td><td id="JHov" class="" style="width:326px">60s</td></tr><tr id="874f36e9-5770-4bc5-8eb4-328c2c475bb3"><td id="jNZF" class="" style="width:331px">Thinking time</td><td id="JHov" class="" style="width:326px">1100ms</td></tr><tr id="52058ddc-417b-4a99-8a7f-e63b376e75d4"><td id="jNZF" class="" style="width:331px">Additional variable thinking time (lambda)</td><td id="JHov" class="" style="width:326px">100ms</td></tr><tr id="1e98ceb2-3e15-4a36-ac03-243d503c3d53"><td id="jNZF" class="" style="width:331px">Duration</td><td id="JHov" class="" style="width:326px">600s</td></tr></tbody></table><p id="767abcec-198c-4c79-9b67-c5b4577f724b" class="">We obtained a curious result where, suddenly, the average response time rise to 1 second when reaches 1200 users. We will investigate this behavior in the next sections.</p><figure id="02f22c18-a041-4b80-9715-6e4e2323eb5a" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/WhatsApp_Image_2024-06-23_at_09.20.46.jpeg"><img style="width:960px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/WhatsApp_Image_2024-06-23_at_09.20.46.jpeg"/></a><figcaption>Average response time for Directors by name</figcaption></figure><p id="b5a6f0e8-f944-4606-ae20-3bb2da0997dd" class="">At the moment, we will focus only on the first 1000 users so we can observe the (almost) linear grow of the average response time. During this test, the Rails’ and PostgreSQL’s CPUs were between low and medium load, so we determined that the optimal number of users for the mid-intensity job is 1000.</p><figure id="4c84b637-eab2-44b6-9429-343fb515777c" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/WhatsApp_Image_2024-06-23_at_09.35.47.jpeg"><img style="width:960px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/WhatsApp_Image_2024-06-23_at_09.35.47.jpeg"/></a><figcaption>Partial average response time for Directors by name</figcaption></figure><h2 id="983977fa-ff43-4c78-aad0-f20b61cfb6e8" class="">6.2. Testing all the classes</h2><p id="03754b41-ea80-4dc1-b2d2-41e3d5a1f042" class="">Once we defined the optimal number of user for Directors by name, we run a mixed test to include all kind of classes and evaluate the entire system.</p><h3 id="f518fc6a-19b4-410e-81c1-3861d39392fa" class="">6.2.1. JMeter configuration</h3><p id="4082d17c-210f-406f-b3a2-d6276dd913ba" class="">As the first test, we changed the JMeter parameters according to the optimal number of users:</p><table id="8ea02d3f-c116-4222-a01f-2834ccd0c7fd" class="simple-table"><thead class="simple-table-header"><tr id="0d29f57f-19fd-4b11-942d-02ef59fccb4c"><th id="jNZF" class="simple-table-header-color simple-table-header" style="width:331px">Parameter</th><th id="JHov" class="simple-table-header-color simple-table-header" style="width:326px">Value / job</th></tr></thead><tbody><tr id="19a68272-3eca-47a0-aa21-dbdfa864444d"><td id="jNZF" class="" style="width:331px">Number of user</td><td id="JHov" class="" style="width:326px">1000</td></tr><tr id="33cc5fe8-cbcd-4892-82bd-011ab3b19049"><td id="jNZF" class="" style="width:331px">Ramp-up</td><td id="JHov" class="" style="width:326px">60s</td></tr><tr id="8fc00c56-f646-4571-8f47-b21bcd28e17e"><td id="jNZF" class="" style="width:331px">Thinking time</td><td id="JHov" class="" style="width:326px">1100ms</td></tr><tr id="5dd44770-79e3-4225-b7f1-6478a2709bd3"><td id="jNZF" class="" style="width:331px">Additional variable thinking time (lambda)</td><td id="JHov" class="" style="width:326px">100ms</td></tr><tr id="7d7e7238-507d-4b81-ad98-d0ef88c29d4e"><td id="jNZF" class="" style="width:331px">Duration</td><td id="JHov" class="" style="width:326px">1200s</td></tr></tbody></table><h3 id="7fc8aefe-a456-4e14-b8a2-4773725086a8" class="">6.2.2. Mixed test results</h3><p id="89b33df7-250c-43e1-a170-3fcac8f7711e" class="">After 20 minutes, we obtained those results:</p><div id="26150a27-6b21-4c23-add0-44e9c542292c" class="collection-content"><h4 class="collection-title"></h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesTitle"><path d="M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z"></path></svg></span>Job</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Samples</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Error</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>AVG Response time (ms)</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>MAX Response time (ms)</th></tr></thead><tbody><tr id="6b482e75-db99-424d-a8e9-4d93380c5544"><td class="cell-title"><a href="https://www.notion.so/Actors-by-name-6b482e75db99424da8e94d93380c5544?pvs=21">Actors by name</a></td><td class="cell-XtpW">37571</td><td class="cell-avDf">4.95%</td><td class="cell-gV@U">5073.28</td><td class="cell-H&gt;u=">129785</td></tr><tr id="b241cbb8-a4c0-4c85-acfe-bea81d11a24c"><td class="cell-title"><a href="https://www.notion.so/Directors-by-name-b241cbb8a4c04c85acfebea81d11a24c?pvs=21">Directors by name</a></td><td class="cell-XtpW">37218</td><td class="cell-avDf">5.15%</td><td class="cell-gV@U">5157.95</td><td class="cell-H&gt;u=">129767</td></tr><tr id="4006a35e-b132-4434-bb49-cb32e2c8c2a5"><td class="cell-title"><a href="https://www.notion.so/Title-by-parameters-4006a35eb1324434bb49cb32e2c8c2a5?pvs=21">Title by parameters</a></td><td class="cell-XtpW">37420</td><td class="cell-avDf">9.23%</td><td class="cell-gV@U">6142.72</td><td class="cell-H&gt;u=">228724</td></tr><tr id="82c0a240-093e-46c6-bfa5-61a6573495c1"><td class="cell-title"><a href="https://www.notion.so/Title-by-primary-title-82c0a240093e46c6bfa561a6573495c1?pvs=21">Title by primary title</a></td><td class="cell-XtpW">37375</td><td class="cell-avDf">5.52%</td><td class="cell-gV@U">5778.13</td><td class="cell-H&gt;u=">219634</td></tr><tr id="bfa6a33d-293d-45d6-80af-dc42dd095fd8"><td class="cell-title"><a href="https://www.notion.so/TOTAL-bfa6a33d293d45d680afdc42dd095fd8?pvs=21">TOTAL</a></td><td class="cell-XtpW">149584</td><td class="cell-avDf">6.15%</td><td class="cell-gV@U">5537.99</td><td class="cell-H&gt;u=">228924</td></tr></tbody></table><br/><br/></div><p id="30f5d82a-a80c-4a21-8111-d50389f30b44" class="">Let’s plot the data to have a more clear view </p><figure id="728c4a4a-c519-400f-956c-2452dc06319b" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%202.png"><img style="width:1455px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%202.png"/></a><figcaption>Average response time VS number of users</figcaption></figure><p id="60a8666a-be64-4d33-b96b-91c91bd6752a" class="">Compared with the unoptimized version, now we have a more homogeneous average response time, with some peaks that will discuss soon. The average response time shows how our improvements has made the webapp more capable reducing drastically the response time even if the number of users increase (excluding the peaks that sometimes has reached almost 3 minutes).</p><p id="dea5c70e-a049-4f34-8472-6f4b0ccaaffb" class="">To analyze the anomalies, we need to plot the success-fail rate:</p><figure id="cd5d57a1-d5bb-423f-a543-e3085977a48d" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%203.png"><img style="width:758px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%203.png"/></a><figcaption>Request summary</figcaption></figure><p id="0ba3c9a6-86d8-46cd-b00f-b639e78206e3" class="">As we can see, the requests failed during the tests are way more than the first test where they were about 1.5%. Looking at the exchanged bytes, we noticed that the response data received from the testing machine were very close to the maximum upload speed of the server. This could lead to packet loss because the network could not keep up to the service demand. To ensure the hypothesis we have looked into the received errors: they were all by HTTP protocol because the response was dropped. So we have supposed that the requests going in timeout or being lost has increased drastically our response time, especially where peaks had occurred; our new bottleneck is the network.</p><h2 id="d2b8aac2-7099-4035-b604-a871acc8258a" class="">6.3. Moving to local network</h2><p id="93e0d55a-f893-45d9-8901-2177f399f582" class="">We set up in the same LAN the testing machine and the server. Now the network is no longer a problem because we are basically limited by the Ethernet cable limits, which has a much higher bandwidth (about 1 Gbps). Since the machines are now in the same LAN, we have removed ZeroTier component and run the tests with the same amount of users.</p><h3 id="bfd57bb6-b872-4821-9129-0567ee41d1d6" class="">6.3.1. Finding the optimal number of users</h3><p id="532c5ab6-3058-4f91-b1ff-2989306a47a6" class="">Without the network bottleneck, we run the same tests previously done, but increasing gradually the number of users from 1000 to 15000. Running both standalone and mixed tests, we noticed that the CPU consumption of Rails and PostgreSQL were below 70% but we still collected an increasing error rate of 6.5%. By looking at the error messages we understood that the new bottleneck was the number of TCP connection that our machines could handle.</p><h3 id="41432bef-2494-4d69-9014-c31e4941e366" class="">6.3.2. Downgrade to single core</h3><p id="92f60ea2-ca84-4184-a232-0138619923b1" class="">Since we can not increase the number of TCP connection (and so we could not reach the server’s saturation point), we changed the assigned cores to Rails and PostgreSQL to find a realistic number of user for our webapp: </p><div id="a845d190-ffe4-4322-b6f3-452ba54063d8" class="collection-content"><h4 class="collection-title"></h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesTitle"><path d="M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z"></path></svg></span>Component</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Cores normally assigned</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Maximum cores usable</th></tr></thead><tbody><tr id="cec1f994-a2cc-423d-bd9d-da0242551c7b"><td class="cell-title"><a href="https://www.notion.so/System-cec1f994a2cc423dbd9dda0242551c7b?pvs=21">System</a></td><td class="cell-:[&gt;a">14</td><td class="cell-l|XD">14</td></tr><tr id="18dcaa47-1d85-4de3-9aac-3fab32ea9fff"><td class="cell-title"><a href="https://www.notion.so/Rails-18dcaa471d854de39aac3fab32ea9fff?pvs=21">Rails</a></td><td class="cell-:[&gt;a">1</td><td class="cell-l|XD">1</td></tr><tr id="649de350-7313-491a-a4ce-d5ffec0401a1"><td class="cell-title"><a href="https://www.notion.so/PostgreSQL-649de3507313491aa4ced5ffec0401a1?pvs=21">PostgreSQL</a></td><td class="cell-:[&gt;a">1</td><td class="cell-l|XD">1</td></tr></tbody></table><br/><br/></div><p id="f129bd5d-1929-4a56-9ef6-b713cb24974a" class="">We have just assigned one core for Rails and one core for PostgreSQL. By throttling the resources assigned to the system we have been able to reach the saturation point without incurring in any network-side bottleneck. </p><h3 id="b6c892c2-4897-4f87-ad84-b1153082c732" class="">6.3.3. Finding the optimal number of users (for 1 core) </h3><p id="1da7d055-6654-48d2-bbf3-59f4567f535f" class="">For the last time, we run the mid-intensity job “Directors by name” to discover the optimal number of jobs for the single core configuration. The JMeter configuration is shown below:</p><table id="7959dbee-3289-49f7-a650-94d3444b5ae2" class="simple-table"><thead class="simple-table-header"><tr id="31ed48ee-06b2-4a8b-abd1-c4505c724d02"><th id="jNZF" class="simple-table-header-color simple-table-header" style="width:331px">Parameter</th><th id="JHov" class="simple-table-header-color simple-table-header" style="width:326px">Value / job</th></tr></thead><tbody><tr id="3a80940b-2ceb-4ac2-8684-8424f79d9dec"><td id="jNZF" class="" style="width:331px">Number of user</td><td id="JHov" class="" style="width:326px">10, 15, 20, 40, 80, 100, 150, 200</td></tr><tr id="74d71810-0979-44ea-8652-24056208ae6b"><td id="jNZF" class="" style="width:331px">Ramp-up</td><td id="JHov" class="" style="width:326px">60s</td></tr><tr id="4ed45a04-ca4b-4b12-a469-4b97a007c578"><td id="jNZF" class="" style="width:331px">Thinking time</td><td id="JHov" class="" style="width:326px">1100ms</td></tr><tr id="12ebb71c-fcba-4bc3-ac5d-0d33fc5058be"><td id="jNZF" class="" style="width:331px">Additional variable thinking time (lambda)</td><td id="JHov" class="" style="width:326px">100ms</td></tr><tr id="0a50223d-6d12-41c7-bf91-df5d09b4b35b"><td id="jNZF" class="" style="width:331px">Duration</td><td id="JHov" class="" style="width:326px">600s</td></tr></tbody></table><p id="f4bd451b-dc5a-49b0-acf2-8fe5a3a0f54c" class="">Surprisingly, the webapp was able to manage 150 users but saturating the CPU usage and failing almost 3% of the requests. We found that 100 users was the optimal quantity since the CPU consumption was above 75% and the error rate was 0%.</p><h3 id="74fdbf6f-a17f-4d98-9851-82b46d7879c8" class="">6.3.4. Testing all classes (with 1 core)</h3><p id="597d1a88-e9f9-4bcd-835c-df7a4c605c53" class="">We run both standalone and mixed tests with 100 users to see if we still receive errors. Taking a look at the results, we saw that the performance metrics were extremely improved compared to the first software implementation where we were able to support 15 users with an average service time of 4 seconds. The new average response times for the mixed load tests results are below 500ms, and the error percentage is null. </p><h2 id="f3e8921e-86e4-4db4-afc2-7bd3c5f1402b" class="">6.4 Restoring ZeroTier</h2><p id="1a56f064-6fca-4d94-b474-d9a11d1c4734" class="">It’s now time to include again ZeroTier station so we can restore the same condition of the first test and make a fair comparison between the first and the last implementation. For the following tests we used the original bandwidth exposed in section 2.2.2. We used 100 users as optimal number since the CPU consumption remains the same even if ZeroTier station is included.</p><h3 id="9cef06d6-7985-4c9f-9e95-065142b5c25f" class="">6.4.1. Standalone tests</h3><p id="2e4ed18a-8e19-4eb9-94e4-e481bd295248" class="">First, we performed a standalone test, to analyze the behavior of every single class. The JMeter configuration is the following:</p><table id="3de06643-0481-414e-bbb4-941cb4dced53" class="simple-table"><thead class="simple-table-header"><tr id="b88ce720-c34b-4247-a3d6-b7fba9f3b788"><th id="jNZF" class="simple-table-header-color simple-table-header" style="width:331px">Parameter</th><th id="JHov" class="simple-table-header-color simple-table-header" style="width:326px">Value / job</th></tr></thead><tbody><tr id="7a13588c-3eba-4c9c-b49f-97b92225b1fa"><td id="jNZF" class="" style="width:331px">Number of user</td><td id="JHov" class="" style="width:326px">100</td></tr><tr id="803f7b5d-6676-432b-bc10-c09983d32bdb"><td id="jNZF" class="" style="width:331px">Ramp-up</td><td id="JHov" class="" style="width:326px">10s</td></tr><tr id="6b6acff9-3d57-48f1-adce-e35d7a26ed2b"><td id="jNZF" class="" style="width:331px">Thinking time</td><td id="JHov" class="" style="width:326px">1100ms</td></tr><tr id="8e29036f-5e84-4a5e-bcf1-84371e37212d"><td id="jNZF" class="" style="width:331px">Additional variable thinking time (lambda)</td><td id="JHov" class="" style="width:326px">100ms</td></tr><tr id="108b48f4-b87b-4d2e-a0dd-7ae34d703a61"><td id="jNZF" class="" style="width:331px">Duration</td><td id="JHov" class="" style="width:326px">600s</td></tr></tbody></table><p id="a6255efa-b2c4-4536-a8c4-d31a1f1c5bc9" class="">After 10 minutes, we obtained the following results:</p><div id="a720c013-8a66-4d7c-88aa-bcd40e90d7b4" class="collection-content"><h4 class="collection-title"></h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesTitle"><path d="M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z"></path></svg></span>Job</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Samples</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Error</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>AVG Response time (ms)</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>MAX Response time (ms)</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>MIN Response time (ms)</th></tr></thead><tbody><tr id="ffb76a5e-8846-4bc2-a4c5-f0ab139cca75"><td class="cell-title"><a href="https://www.notion.so/Actors-by-name-ffb76a5e88464bc2a4c5f0ab139cca75?pvs=21">Actors by name</a></td><td class="cell-XtpW">47050</td><td class="cell-avDf">0%</td><td class="cell-gV@U">63.19</td><td class="cell-H&gt;u=">722</td><td class="cell-yZ?P">37</td></tr><tr id="62404afd-2d3f-4663-846b-c557454f6afc"><td class="cell-title"><a href="https://www.notion.so/Directors-by-name-62404afd2d3f4663846bc557454f6afc?pvs=21">Directors by name</a></td><td class="cell-XtpW">46948</td><td class="cell-avDf">0%</td><td class="cell-gV@U">65.56</td><td class="cell-H&gt;u=">1341</td><td class="cell-yZ?P">38</td></tr><tr id="a6ee94c3-713d-4ec2-8185-68dd210e5d44"><td class="cell-title"><a href="https://www.notion.so/Title-by-parameters-a6ee94c3713d4ec2818568dd210e5d44?pvs=21">Title by parameters</a></td><td class="cell-XtpW">30521</td><td class="cell-avDf">0%</td><td class="cell-gV@U">748.87</td><td class="cell-H&gt;u=">6529</td><td class="cell-yZ?P">40</td></tr><tr id="714dff24-386d-42ad-be8c-2e239d0b97bc"><td class="cell-title"><a href="https://www.notion.so/Title-by-primary-title-714dff24386d42adbe8c2e239d0b97bc?pvs=21">Title by primary title</a></td><td class="cell-XtpW">44387</td><td class="cell-avDf">0%</td><td class="cell-gV@U">138.97</td><td class="cell-H&gt;u=">2047</td><td class="cell-yZ?P">38</td></tr><tr id="465f702a-1a89-40ae-b278-7d4d66f0a11d"><td class="cell-title"><a href="https://www.notion.so/TOTAL-465f702a1a8940aeb2787d4d66f0a11d?pvs=21">TOTAL</a></td><td class="cell-XtpW">168906</td><td class="cell-avDf">0%</td><td class="cell-gV@U">207.75</td><td class="cell-H&gt;u=">6529</td><td class="cell-yZ?P">37</td></tr></tbody></table><br/><br/></div><p id="b2fbae06-0396-48d1-bb6a-fde334ad81f6" class="">Plotting them we obtain the average response time in relation to the number of users:</p><figure id="1734a5bf-f59d-4b13-8fde-d150affc6dbd" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/4f7f1946-a579-47f4-8f24-a917ca8e0cbb.png"><img style="width:708px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/4f7f1946-a579-47f4-8f24-a917ca8e0cbb.png"/></a><figcaption>Average response time in relation with the number of users</figcaption></figure><p id="c4cc46f0-837f-4743-95e7-f6e2cb93a595" class="">It is possible to notice that the majority of queries have a pretty low response time. The Title by param job is the most resource heavy one, so we decided to exclude it in the following graph to obtain a clearer view of the other 3 classes:</p><figure id="d65981d1-7a9a-443b-b5f5-fdd832d2fd19" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%204.png"><img style="width:1758px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%204.png"/></a><figcaption>Average response time in relation with the number of users without Title by param</figcaption></figure><p id="3582c16b-652f-47a5-b200-2d6ca30c3e9b" class="">Finally, we decided to plot every class to provide a more in-depth view:</p><figure id="81dcb6ed-0b7e-4159-95f3-479567405fd7" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%205.png"><img style="width:708px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%205.png"/></a><figcaption>Average response time VS number of users - Actors by name</figcaption></figure><figure id="764346ec-3acc-49a8-b1b4-e6ed96babedc" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%206.png"><img style="width:708px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%206.png"/></a><figcaption>Average response time VS number of users - Directors by name</figcaption></figure><figure id="e5ef816d-12d2-4580-9d10-7ba2d54362c5" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%207.png"><img style="width:708px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%207.png"/></a><figcaption>Average response time VS number of users - TItle by parameters</figcaption></figure><figure id="378b267e-5696-4d6e-9794-cdb60c436979" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%208.png"><img style="width:1462px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%208.png"/></a><figcaption>Average response time VS number of users - Primary title</figcaption></figure><h3 id="bff1f926-1b64-4004-b419-903c55f3ba8a" class="">6.4.2. Mixed test</h3><p id="29ad50ed-5499-46da-9dae-76f4a87e659a" class="">Then we moved to the mixed tests with the same JMeter parameters and we obtained these results:</p><div id="8594e78e-12bf-43f6-814b-6574758233ef" class="collection-content"><h4 class="collection-title"></h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesTitle"><path d="M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z"></path></svg></span>Job</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Samples</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Error</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>AVG Response time (ms)</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>MAX Response time (ms)</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>MIN Response time (ms)</th></tr></thead><tbody><tr id="4b5ac4b5-0947-44b9-b6be-e88ac87fafb2"><td class="cell-title"><a href="https://www.notion.so/Actors-by-name-4b5ac4b5094744b9b6bee88ac87fafb2?pvs=21">Actors by name</a></td><td class="cell-XtpW">11291</td><td class="cell-avDf">0%</td><td class="cell-gV@U">99.58</td><td class="cell-H&gt;u=">1216</td><td class="cell-yZ?P">37</td></tr><tr id="410375f0-74d3-42a7-a9c2-bbdfbb48a498"><td class="cell-title"><a href="https://www.notion.so/Directors-by-name-410375f074d342a7a9c2bbdfbb48a498?pvs=21">Directors by name</a></td><td class="cell-XtpW">11401</td><td class="cell-avDf">0%</td><td class="cell-gV@U">101.33</td><td class="cell-H&gt;u=">109</td><td class="cell-yZ?P">38</td></tr><tr id="4270b459-9edf-47c2-8fc3-64da97c56130"><td class="cell-title"><a href="https://www.notion.so/Title-by-parameters-4270b4599edf47c28fc364da97c56130?pvs=21">Title by parameters</a></td><td class="cell-XtpW">11391</td><td class="cell-avDf">0%</td><td class="cell-gV@U">126.41</td><td class="cell-H&gt;u=">2396</td><td class="cell-yZ?P">40</td></tr><tr id="93de93f3-50f4-407a-97ed-ca6325500898"><td class="cell-title"><a href="https://www.notion.so/Title-by-primary-title-93de93f350f4407a97edca6325500898?pvs=21">Title by primary title</a></td><td class="cell-XtpW">1357</td><td class="cell-avDf">0%</td><td class="cell-gV@U">104.79</td><td class="cell-H&gt;u=">1152</td><td class="cell-yZ?P">38</td></tr><tr id="d9390a6c-f566-49eb-9b73-633773b53877"><td class="cell-title"><a href="https://www.notion.so/TOTAL-d9390a6cf56649eb9b73633773b53877?pvs=21">TOTAL</a></td><td class="cell-XtpW">45440</td><td class="cell-avDf">0%</td><td class="cell-gV@U">108.05</td><td class="cell-H&gt;u=">296</td><td class="cell-yZ?P">37</td></tr></tbody></table><br/><br/></div><p id="fe2b36ac-6da2-41de-b7bd-0453fb8abc26" class="">To have a clearer overview we plotted the data to see the response time over time:</p><figure id="f8d34d81-29f6-4f01-99cc-915b3e746a99" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%209.png"><img style="width:708px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%209.png"/></a><figcaption>Average response time over time</figcaption></figure><h3 id="61b3bebb-40d3-49be-8826-855951ed5d03" class="">6.4.3. Results analysis </h3><p id="f483b11c-cfa6-4097-93ef-5611928da113" class="">The tests performed with JMeter had shown how our implementation has reduced significantly the response time (from 4 seconds to 150ms) and increased the number of users of 567% (from 15 to 100). Most of the times the average response time lies around 100/150ms both in standalone and mixed tests. The average response time growth is not linear: there are some peaks due to cache misses witch leads to asking PostgreSQL to fetch the corresponding data. However, recall that those results are obtained only with a core assigned to PostgreSQL and one to Rails instead of the optimal configuration exposed in section 5.5. The network bottleneck and the maximum number of possible TCP connection doesn’t allow a full load-test of our webapp. For this reason, we decided to model our system from an analytic point of view.</p><h2 id="70ba13a0-9380-46b0-8708-c28d8098c288" class="">6.5. JMT analysis</h2><p id="21d99f55-ccd6-4e85-9b3a-eacd5e188639" class="">In order to analyze the number of users used in the system we have modeled a JMT analytical analysis that allows us to better understand how the server should respond with an increasing amount of users.</p><p id="51de5395-c43d-4be8-a643-8aad9c8d36e1" class="">In the analysis we considered the most resource demanding class, which is TitleBasics by params. We run a test with 200 users to obtain response times metrics for Rails and PostgreSQL. Logging the operations allowed us to obtain these times expressed in seconds:</p><div id="815c785e-2dc9-4805-b21e-528e6923ab5d" class="collection-content"><h4 class="collection-title"></h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesTitle"><path d="M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z"></path></svg></span>Query</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Service times</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>PostgreSQL</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>Rails (Service times - PostgreSQL)</th></tr></thead><tbody><tr id="daf8fe48-3485-417a-8fe7-93648d15934b"><td class="cell-title"><a href="https://www.notion.so/Title-by-params-daf8fe483485417a8fe793648d15934b?pvs=21">Title by params</a></td><td class="cell-W@z~">0.352119630432783</td><td class="cell-hAr&lt;">0.0125167313915858</td><td class="cell-;rQX">0.339602899041197</td></tr></tbody></table><br/><br/></div><p id="3f8d40ef-dce8-4d44-9a10-d6dcd601dfb1" class="">Since we are in a closed system this is what we have modeled in JMT:</p><figure id="bbded6c3-d2be-45ec-888a-07b644b85048" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%2010.png"><img style="width:708px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%2010.png"/></a></figure><p id="34e1de2c-e4f5-41ba-8574-d52f9d8719d8" class="">As we showed in the diagram in section 3, we have modeled a first station of users and 3 stations for the other components:</p><figure id="dafb4854-8a80-4842-b5f2-3b53ef7d1fe9" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%2011.png"><img style="width:708px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%2011.png"/></a></figure><p id="07402521-1a52-4b12-a0eb-128468f8d8a3" class="">We then put the service times. For the users we have considered the thinking time previously mentioned of 1100ms:</p><figure id="94ef7900-dedc-4e19-8589-03a94a54bbc1" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%2012.png"><img style="width:1052px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%2012.png"/></a></figure><p id="6ab3e494-b72e-4f26-9b62-35b48765a5cf" class="">Since we need to visit each station, we have put 1 to each one of them:</p><figure id="18e8cd84-e94c-4ada-be3a-84d84cc87cd2" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%2013.png"><img style="width:1052px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%2013.png"/></a></figure><p id="0c877495-1657-46c3-bcff-9c339df2f5af" class="">The reference station is the user one:</p><figure id="59c0cfcb-1eaa-4df1-a78f-1cc0a2288e18" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%2014.png"><img style="width:1052px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%2014.png"/></a></figure><p id="bf870e03-1cea-40e9-8666-d7bb7d20b1a0" class="">In the What-if analysis we calculated up to 12 times the initial number of users, which is <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>200</mn><mo>×</mo><mn>12</mn><mo>=</mo><mn>2400</mn></mrow><annotation encoding="application/x-tex">200\times 12=2400</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">200</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">12</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2400</span></span></span></span></span><span>﻿</span></span> users:</p><figure id="655731c9-1867-4782-add4-8c6925a28bbc" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%2015.png"><img style="width:1052px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%2015.png"/></a></figure><p id="9a79c9d5-3f3a-42ff-a017-64d60a56a38a" class="">This is the utilization plot of the analysis:</p><figure id="e5e834bd-a0d8-41b7-a411-9ae5d268d729" class="image"><a href="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%2016.png"><img style="width:2560px" src="Project%20Report%20415b562b628e4740b77270a2c70d3fb9/Untitled%2016.png"/></a></figure><p id="66b9f177-6c33-4932-8865-9c329495cfb0" class="">These are the results in number:</p><div id="e34906b7-7f48-48b0-9d59-e30fca5a1670" class="collection-content"><h4 class="collection-title"></h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesTitle"><path d="M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z"></path></svg></span>Station</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>200 users</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>400 users</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>600 users (OPTIMAL)</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>800 users</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>1000 users</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>1200 users</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>1400 users</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>1600 users</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>1800 users</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>2000 users</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>2200 users</th><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesNumber"><path d="M2.4834 10.9902H4.33594L3.75488 13.8887C3.74121 13.9639 3.72754 14.0664 3.72754 14.1416C3.72754 14.5381 3.99414 14.7637 4.39746 14.7637C4.81445 14.7637 5.09473 14.5449 5.18359 14.1143L5.80566 10.9902H8.79297L8.21191 13.8887C8.19824 13.9639 8.18457 14.0664 8.18457 14.1416C8.18457 14.5381 8.45117 14.7637 8.85449 14.7637C9.27148 14.7637 9.55176 14.5449 9.63379 14.1143L10.2627 10.9902H12.4502C12.9287 10.9902 13.2432 10.6758 13.2432 10.2109C13.2432 9.8418 12.9902 9.56836 12.6006 9.56836H10.5498L11.2129 6.28711H13.3662C13.8379 6.28711 14.1523 5.96582 14.1523 5.50098C14.1523 5.13184 13.9062 4.8584 13.5098 4.8584H11.5L12.0195 2.27441C12.0264 2.21973 12.0469 2.11035 12.0469 2.01465C12.0469 1.625 11.7666 1.39258 11.3633 1.39258C10.9053 1.39258 10.6797 1.63867 10.5977 2.05566L10.0303 4.8584H7.04297L7.5625 2.27441C7.57617 2.21973 7.58984 2.11035 7.58984 2.01465C7.58984 1.625 7.30957 1.39258 6.91309 1.39258C6.44824 1.39258 6.21582 1.63867 6.13379 2.05566L5.57324 4.8584H3.54297C3.06445 4.8584 2.75 5.18652 2.75 5.65137C2.75 6.03418 3.00293 6.28711 3.39258 6.28711H5.28613L4.62305 9.56836H2.63379C2.15527 9.56836 1.84082 9.89648 1.84082 10.3613C1.84082 10.7373 2.09375 10.9902 2.4834 10.9902ZM6.09277 9.56836L6.75586 6.28711H9.74316L9.08008 9.56836H6.09277Z"></path></svg></span>2400 users</th></tr></thead><tbody><tr id="3290d40a-9d1d-4548-a7d3-3f34f125f7de"><td class="cell-title"><a href="https://www.notion.so/ZeroTier-3290d40a9d1d4548a7d33f34f125f7de?pvs=21">ZeroTier</a></td><td class="cell-eDXB">0.0228783735197002</td><td class="cell-eadu">0.0434613711816067</td><td class="cell-\leg">0.0611164347855742</td><td class="cell-o=_v">0.0752859027279838</td><td class="cell-}Rxu">0.085702563690324</td><td class="cell-ukC&gt;">0.0925755300463225</td><td class="cell-TNro">0.0965839957134109</td><td class="cell-]@}G">0.0986359290708163</td><td class="cell-D{qg">0.0995590991944496</td><td class="cell-z;?K">0.0999268369998704</td><td class="cell-vd=w">0.100057866464616</td><td class="cell-xsnI">0.100100071532134</td></tr><tr id="d788634c-008d-43af-a536-77e18b2f742a"><td class="cell-title"><a href="https://www.notion.so/Rails-d788634c008d43afa53677e18b2f742a?pvs=21">Rails</a></td><td class="cell-eDXB">0.228516528606986</td><td class="cell-eadu">0.434106107340564</td><td class="cell-\leg">0.610450542124801</td><td class="cell-o=_v">0.751979730098731</td><td class="cell-}Rxu">0.85602467895579</td><td class="cell-ukC&gt;">0.92467407011784</td><td class="cell-TNro">0.964711910154614</td><td class="cell-]@}G">0.985207278296208</td><td class="cell-D{qg">0.994428197422505</td><td class="cell-z;?K">0.998101280505092</td><td class="cell-vd=w">0.999410044801777</td><td class="cell-xsnI">0.999831602545405</td></tr><tr id="b3204e83-6dba-4985-8aad-6cb92f5f8d08"><td class="cell-title"><a href="https://www.notion.so/PostgreSQL-b3204e836dba49858aad6cb92f5f8d08?pvs=21">PostgreSQL</a></td><td class="cell-eDXB">0.00842242517713108</td><td class="cell-eadu">0.0159998326173582</td><td class="cell-\leg">0.0224993528771295</td><td class="cell-o=_v">0.0277156888829185</td><td class="cell-}Rxu">0.0315504696847665</td><td class="cell-ukC&gt;">0.0340806777359853</td><td class="cell-TNro">0.0355563509138482</td><td class="cell-]@}G">0.0363117479334975</td><td class="cell-D{qg">0.0366516030060345</td><td class="cell-z;?K">0.0367869816922987</td><td class="cell-vd=w">0.0368352187691986</td><td class="cell-xsnI">0.0368507561072424</td></tr></tbody></table><br/><br/></div><p id="405b8a1e-c441-4a4f-808a-892c2a9ff9ec" class="">As we can see by the third column, the highlighted one, we obtianed an utilization around 60% in the third step. The number of users in the third step is <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>200</mn><mo>×</mo><mn>3</mn><mo>=</mo><mn>600</mn></mrow><annotation encoding="application/x-tex">200\times 3=600</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">200</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">600</span></span></span></span></span><span>﻿</span></span>. So in medium load the system can handle 600 users.</p><p id="c6eeeb3b-77e5-4f2b-b28f-9294ddc068fd" class="">At step 9 the system reaches 99% of utilization, which means <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>200</mn><mo>×</mo><mn>9</mn><mo>=</mo><mn>1800</mn></mrow><annotation encoding="application/x-tex">200\times 9=1800</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">200</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1800</span></span></span></span></span><span>﻿</span></span> users put the system in saturation.</p><p id="f45789dc-b321-43c9-a007-c7d4089d7ce2" class="">These results correspond with the experimental ones. </p><h1 id="6a927a5a-6a99-41eb-b08a-c1f0fe7defa5" class="">7. Considerations</h1><p id="193502b2-c5e7-4f6a-978f-ff35e1ddc72d" class="">In conclusion, the application we have now is very different from the application we initially developed. We optimized the queries mainly to make them less computationally intensive.</p><p id="e2829bd0-ab1b-435a-81c8-6cbf5ea296a8" class="">The first thing that we did was increasing the number of cores that Docker could use for Rails and PostgreSQL. It increased the number of handable users indeed. </p><p id="ae90ceae-83f1-404a-8fc9-bc940b1e5dc6" class="">Then we put indexes on the columns used in joins and for searching results. This optimized the queries which are now faster than ever.</p><p id="e315e823-1b45-4a82-9a2e-40bb41279e22" class="">In order to reduce the load on PostgreSQL we introduced caching in Rails, so that if a query with specific parameters has already been made, we could easily return the result without having to interrogate PostgreSQL. This made the webapp very fast. In fact we could not test in remote because we reached the bandwidth limit.</p><p id="07bf7e94-42e9-43cf-8ff6-8acda45ecfa6" class="">In LAN we tested the app and we found that it could easily reach 15000 users. At this point the problem was the TCP connections saturation.</p><p id="c7a048f9-362d-4e8f-aa4d-09e377d6f5c2" class="">In order to avoid this kind of problem we had to throttle the performances by assigning one core to Rails and one core to PostgreSQL. In this way the webapp could handle way less queries and we could draw some conclusions.</p><p id="b012e0fa-af6e-44c7-8743-2d36d3e5ecc7" class="">We have manually run tests with different amount of users. We found that with 100 users the assigned cores were in low load. We used this data to perform our final tests. We found that the bottleneck is now Rails because it has to handle requests and cache.</p><p id="f3bea79e-638b-4885-890e-945ec77c3250" class="">Using JMT we analyzed the heaviest query and we found out that at 600 users the app is in middle-high load and with 1800 users we reach the saturation point.</p><p id="acb64ce1-4eab-44a2-93c2-55bafc4be7cc" class="">By running all these tests and trying to validate different hypothesis we can now ensure that in order to improve these performances we have to assign more cores to Rails. This is specific to this use-case scenario because we only have to read the database. If we had to perform any kind of change (insert, update or delete) we could not just assign more cores to Rails because PostgreSQL would have to write new data, update indexes and keep the database consistent.</p><p id="85c91723-ed91-43c0-882d-e58f0ce2c164" class="">
</p><hr id="2c1f3b07-9a6d-4f06-89f8-42f8aeb6de95"/><p id="307ceda1-370a-42e7-ba02-8e87ae0188c9" class="">
</p></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>